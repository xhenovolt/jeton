# Infrastructure & Intellectual Property - Complete Reference

## ðŸ”§ Infrastructure Management

### Features
- âœ… Full CRUD operations (Create, Read, Update, Delete)
- âœ… Risk level tracking (Critical, High, Medium, Low)
- âœ… Replacement cost calculation
- âœ… Owner/responsibility assignment
- âœ… Type classification (Website, Domain, Social Media, Design System, Brand, Other)

### User Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Infrastructure Management Page     â”‚
â”‚         /app/infrastructure         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“           â†“           â†“
    [View All]   [Add New]   [Search]
         â†“
   [Infrastructure Items Table]
    â”œâ”€ Name
    â”œâ”€ Type
    â”œâ”€ Risk Level
    â”œâ”€ Replacement Cost
    â”œâ”€ Owner
    â”œâ”€ Description
    â””â”€ [Actions: Edit | Delete]
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Click Edit/Delete â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â†“
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Modal Form (Create/Edit Mode)    â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ [Name *]                           â”‚
    â”‚ [Type *]                           â”‚
    â”‚ [Risk Level]                       â”‚
    â”‚ [Replacement Cost]                 â”‚
    â”‚ [Owner]                            â”‚
    â”‚ [Description]                      â”‚
    â”‚ [Cancel] [Add/Update]             â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Valid Infrastructure Types
- website
- domain
- social_media
- design_system
- brand
- other

### Valid Risk Levels
- critical
- high
- medium
- low

---

## ðŸ’¼ Intellectual Property Management

### Features
- âœ… Full CRUD operations (Create, Read, Update, Delete)
- âœ… Development cost tracking
- âœ… Valuation estimation
- âœ… Revenue monitoring
- âœ… Client relationship tracking
- âœ… Monetization model classification

### User Workflow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Intellectual Property Page          â”‚
â”‚      /app/intellectual-property      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“           â†“           â†“
  [View All] [Add Asset] [Metrics]
      â†“
  [IP Assets Table]
   â”œâ”€ Name
   â”œâ”€ Type
   â”œâ”€ Dev Cost
   â”œâ”€ Valuation
   â”œâ”€ Monthly Revenue
   â”œâ”€ Clients
   â”œâ”€ Status
   â””â”€ [Actions: Edit | Delete]
      â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Click Edit/Delete   â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â†“
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  Modal Form (Create/Edit Mode)      â”‚
   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
   â”‚ [Name *]                             â”‚
   â”‚ [Type *]                             â”‚
   â”‚ [Development Cost *]                 â”‚
   â”‚ [Valuation Estimate]                 â”‚
   â”‚ [Monetization Model]                 â”‚
   â”‚ [Monthly Revenue]                    â”‚
   â”‚ [Clients Count]                      â”‚
   â”‚ [Status]                             â”‚
   â”‚ [Cancel] [Create/Update]            â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Valid IP Types
- software
- internal_system
- licensed_ip
- brand

### Monetization Models
- license
- subscription
- product
- partnership
- (custom)

---

## ðŸ“Š Metrics & Statistics

### Infrastructure Dashboard Shows:
- **Total Replacement Cost** - Sum of all replacement costs
- **Critical Items** - Count of critical risk items
- **Total Items** - Number of active infrastructure items

### IP Dashboard Shows:
- **Total Valuation** - Sum of all valuation estimates
- **Lifetime Revenue** - Sum of all revenue generated
- **Total Assets** - Number of active IP assets

---

## ðŸ”„ CRUD Operations Detailed

### CREATE

**Infrastructure:**
```javascript
POST /api/infrastructure
{
  "name": "My Domain",
  "infrastructure_type": "domain",
  "description": "Main domain",
  "risk_level": "medium",
  "replacement_cost": 5000,
  "owner": "CTO"
}
```

**IP Asset:**
```javascript
POST /api/intellectual-property
{
  "name": "Platform Core",
  "ip_type": "software",
  "development_cost": 100000,
  "valuation_estimate": 500000,
  "monetization_model": "license",
  "revenue_generated_monthly": 5000,
  "clients_count": 10
}
```

### READ

**List All Infrastructure:**
```
GET /api/infrastructure
```

**List All IP:**
```
GET /api/intellectual-property
```

**Get Single Item:**
```
GET /api/infrastructure/[id]
GET /api/intellectual-property/[id]
```

### UPDATE

**Edit Infrastructure:**
```
PUT /api/infrastructure/[id]
{...updated fields...}
```

**Edit IP:**
```
PUT /api/intellectual-property/[id]
{...updated fields...}
```

### DELETE

**Archive Infrastructure:**
```
DELETE /api/infrastructure/[id]
(Sets status to 'archived')
```

**Archive IP:**
```
DELETE /api/intellectual-property/[id]
(Sets status to 'deprecated')
```

---

## ðŸŽ¯ State Management

### Infrastructure Component State
```javascript
const [infrastructure, setInfrastructure] = useState([])
const [loading, setLoading] = useState(true)
const [showModal, setShowModal] = useState(false)
const [editingId, setEditingId] = useState(null)

const [form, setForm] = useState({
  name: '',
  infrastructure_type: 'website',
  description: '',
  risk_level: 'medium',
  replacement_cost: '',
  recovery_procedures: '',
  owner: '',
})
```

### IP Component State
```javascript
const [ip, setIP] = useState([])
const [loading, setLoading] = useState(true)
const [showModal, setShowModal] = useState(false)
const [editingId, setEditingId] = useState(null)

const [form, setForm] = useState({
  name: '',
  ip_type: 'software',
  description: '',
  development_cost: '',
  valuation_estimate: '',
  monetization_model: 'license',
  revenue_generated_monthly: '',
  clients_count: '',
  status: 'active',
})
```

---

## ðŸš€ Key Functions

### Shared Pattern Across Both Pages

**Create/Update Handler:**
```javascript
const handleCreateItem = async (e) => {
  e.preventDefault()
  
  const url = editingId 
    ? `/api/endpoint/${editingId}` 
    : '/api/endpoint'
  const method = editingId ? 'PUT' : 'POST'
  
  // Send request
  if (success) {
    if (editingId) {
      // Update existing
      setItems(items.map(item => 
        item.id === editingId ? result.data : item
      ))
    } else {
      // Add new
      setItems([result.data, ...items])
    }
    handleCloseModal()
  }
}
```

**Edit Handler:**
```javascript
const handleEditItem = (item) => {
  setEditingId(item.id)
  setForm({...item})
  setShowModal(true)
}
```

**Delete Handler:**
```javascript
const handleDeleteItem = async (id) => {
  if (!confirm('Delete this item?')) return
  
  const response = await fetch(`/api/endpoint/${id}`, {
    method: 'DELETE'
  })
  
  if (success) {
    setItems(items.filter(item => item.id !== id))
  }
}
```

**Close Modal:**
```javascript
const handleCloseModal = () => {
  setShowModal(false)
  setEditingId(null)
  setForm({...defaultForm})
}
```

---

## ðŸŽ¨ UI Components

### Table Structure
```html
<table>
  <thead>
    <tr>
      <th>Column 1</th>
      <th>Column 2</th>
      ...
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    {items.map(item => (
      <tr>
        <td>{item.field}</td>
        ...
        <td>
          <button onClick={() => handleEditItem(item)}>
            <Edit />
          </button>
          <button onClick={() => handleDeleteItem(item.id)}>
            <Trash2 />
          </button>
        </td>
      </tr>
    ))}
  </tbody>
</table>
```

### Modal Structure
```html
<div className="modal">
  <h2>{editingId ? 'Edit' : 'Create'} Item</h2>
  
  <form onSubmit={handleCreateItem}>
    {/* Form fields */}
    
    <button type="button" onClick={handleCloseModal}>
      Cancel
    </button>
    <button type="submit">
      {editingId ? 'Update' : 'Create'}
    </button>
  </form>
</div>
```

---

## âœ… Validation

### Client-Side
- Required field checking
- Type validation
- Number range validation
- Confirmation dialogs for destructive actions

### Server-Side
- Field existence validation
- Type validation
- Business logic validation
- Authorization checks
- Audit logging

---

## ðŸ”’ Security Features

- âœ… Soft delete (data not permanently removed)
- âœ… Edit ID validation (can't access others' items)
- âœ… Confirmation dialogs (prevent accidental deletion)
- âœ… Input validation (both client and server)
- âœ… Error messages (user-friendly)
- âœ… Audit logging (track all changes)

---

## ðŸ“± Responsive Design

Both pages support:
- âœ… Desktop (full table view)
- âœ… Tablet (scrollable table)
- âœ… Mobile (modal-focused)
- âœ… Dark mode
- âœ… Light mode

---

## ðŸš¨ Error Handling

Both pages handle:
- âœ… Missing required fields
- âœ… API connection errors
- âœ… Invalid data submissions
- âœ… Item not found errors
- âœ… Unauthorized access
- âœ… Server-side errors

---

## ðŸ“š Database Schema Reference

### Infrastructure Table
```sql
infrastructure (
  id INTEGER PRIMARY KEY,
  name VARCHAR(255),
  infrastructure_type VARCHAR(50),
  description TEXT,
  owner_name VARCHAR(255),
  risk_level VARCHAR(50),
  replacement_cost NUMERIC,
  status VARCHAR(50),
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

### IP Table
```sql
intellectual_property (
  id INTEGER PRIMARY KEY,
  name VARCHAR(255),
  ip_type VARCHAR(50),
  description TEXT,
  development_cost NUMERIC,
  valuation_estimate NUMERIC,
  monetization_model VARCHAR(50),
  revenue_generated_monthly NUMERIC,
  clients_count INTEGER,
  status VARCHAR(50),
  created_at TIMESTAMP,
  updated_at TIMESTAMP
)
```

---

## ðŸŽ“ Testing Checklist

### Infrastructure
- [ ] Create new infrastructure item
- [ ] Edit existing infrastructure
- [ ] Delete infrastructure (confirm dialog)
- [ ] View all items in table
- [ ] Check metrics update
- [ ] Form validation (missing fields)
- [ ] Modal opens/closes properly
- [ ] Edit mode loads correct data
- [ ] Submit button text changes (Add/Update)

### IP Assets
- [ ] Create new IP asset
- [ ] Edit existing IP asset
- [ ] Delete IP asset (confirm dialog)
- [ ] View all items in table
- [ ] Check metrics update
- [ ] Form validation (missing fields)
- [ ] Modal opens/closes properly
- [ ] Edit mode loads correct data
- [ ] Submit button text changes (Create/Update)

---

## ðŸ’¡ Tips & Best Practices

1. **Always confirm before deleting** - Both pages show confirmation dialogs
2. **Check form validation** - Required fields are marked with *
3. **Monitor metrics** - Dashboard updates in real-time
4. **Use appropriate types** - Select from predefined types for consistency
5. **Add descriptions** - Help others understand items
6. **Assign owners** - Track responsibility

---

## ðŸ”— Related Pages

- Infrastructure: `/app/infrastructure`
- Intellectual Property: `/app/intellectual-property`
- Valuation: `/app/valuation`
- Dashboard: `/app/dashboard`

---

**Last Updated:** December 30, 2025
**Status:** âœ… Full CRUD Operations Functional
**Errors:** âœ… None
